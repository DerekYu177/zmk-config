// Copyright (c) 2022 The ZMK Contributors
// SPDX-License-Identifier: MIT

#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/pointing.h>
#include <dt-bindings/zmk/pointing.h>

// Home row mods macro
// #define HRML(k1,k2,k3,k4) &ht LSHFT k1  &ht LALT k2  &ht LCTRL k3  &ht LGUI k4
// #define HRMR(k1,k2,k3,k4) &ht RGUI k1  &ht RCTRL k2  &ht RALT k3  &ht RSHFT k4

&mt {
    tapping-term-ms = <200>;
    flavor = "tap-preferred";
};

/ {
    conditional_layers { compatible = "zmk,conditional-layers"; };

    combos {
        compatible = "zmk,combos";

        // combo-meta-layer {
        //     bindings = <&mo 4>;
        //     key-positions = <31 32>;
        // };
    };

    keymap {
        compatible = "zmk,keymap";

        base {
            bindings = <
// ╭───────────┬───────────┬───────────┬───────────┬───────────╮ ╭───────────┬───────────┬───────────┬───────────┬───────────╮
        &kp Q       &kp W       &kp E       &kp R       &kp T       &kp Y       &kp U       &kp I       &kp O       &kp P
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
        &kp A    &mt LCTRL S &mt LALT D  &mt RGUI F     &kp G       &kp H     &mt RGUI J  &mt RALT K  &mt RCTRL L  &kp COLON
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
        &kp Z       &kp X       &kp C       &kp V       &kp B       &kp N       &kp M       &kp COMMA   &kp DOT     &kp FSLH
// ╰───────────┴───────────┴───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┴───────────┴───────────╯
                                        &kp LSHIFT      &mo 1       &lt 2 SPACE &mo 3
//                                     ╰───────────┴───────────╯ ╰───────────┴───────────╯
            >;
        };

        left-thumb {
            bindings = <
// ╭───────────┬───────────┬───────────┬───────────┬───────────╮ ╭───────────┬───────────┬───────────┬───────────┬───────────╮
     &kp F1        &kp F2      &kp F3     &kp F4      &kp F5         &kp F6       &kp F7      &kp F8     &kp F9     &kp F10
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
     &kp ESC    &kp LCTRL   &kp LEFT_ALT  &kp LGUI    &kp TAB        &trans      &trans     &trans      &trans      &trans
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
     &trans        &trans     &trans      &trans      &trans         &kp F11     &kp F12    &trans      &trans      &trans
// ╰───────────┴───────────┴───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┴───────────┴───────────╯
                                          &kp LSHIFT  &trans         &trans      &trans
//                                     ╰───────────┴───────────╯ ╰───────────┴───────────╯
            >;
        };

        right-deep-thumb {
            bindings = <
// ╭───────────┬───────────┬───────────┬───────────┬───────────╮ ╭───────────┬───────────┬───────────┬───────────┬───────────╮
        &trans      &trans      &trans      &trans      &trans      &trans      &trans      &trans      &trans      &kp BSPC
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
        &trans      &kp LCTRL   &kp LALT    &kp LGUI    &trans      &kp LEFT    &kp DOWN    &kp UP      &kp RIGHT   &kp RET
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
        &trans      &trans      &trans      &trans      &trans      &trans      &trans      &trans      &trans      &trans
// ╰───────────┴───────────┴───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┴───────────┴───────────╯
                                            &kp LSHIFT  &trans      &trans      &trans
//                                     ╰───────────┴───────────╯ ╰───────────┴───────────╯
            >;
        };

        right-thumb {
            bindings = <
// ╭───────────┬───────────┬───────────┬───────────┬───────────╮ ╭───────────┬───────────┬───────────┬───────────┬───────────╮
        &kp N1      &kp N2      &kp N3      &kp N4      &kp N5      &kp N6      &kp N7      &kp N8      &kp N9      &kp N0
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
     &kp GRAVE   &kp LCTRL   &kp LALT   &kp LGUI   &kp SEMICOLON    &trans  &mt RGUI MINUS &kp RALT  &kp RIGHT_CONTROL &kp SQT
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
        &trans      &trans      &trans      &trans      &trans      &trans      &kp EQUAL    &kp LBKT   &kp RBKT    &kp BSLH
// ╰───────────┴───────────┴───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┴───────────┴───────────╯
                                            &kp LSHIFT  &trans      &trans      &trans
//                                     ╰───────────┴───────────╯ ╰───────────┴───────────╯
            >;
        };

        meta {
            bindings = <
// ╭───────────┬───────────┬───────────┬───────────┬───────────╮ ╭───────────┬───────────┬───────────┬───────────┬───────────╮
     &trans      &trans  &mmv MOVE_UP    &trans      &trans     &trans &kp C_BRIGHTNESS_DEC &kp C_BRIGHTNESS_INC &trans &trans
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
    &trans &mmv MOVE_LEFT &mmv MOVE_DOWN &mmv MOVE_RIGHT &trans   &kp K_MUTE  &kp C_VOLUME_DOWN &kp C_VOLUME_UP &mkp RCLK &mkp LCLK
// ├───────────┼───────────┼───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┼───────────┼───────────┤
    &bt BT_SEL 0 &bt BT_SEL 1 &bt BT_SEL 2 &bt BT_SEL 3 &bt BT_SEL 4 &trans     &trans      &trans    &sys_reset  &bootloader
// ╰───────────┴───────────┴───────────┼───────────┼───────────┤ ├───────────┼───────────┼───────────┴───────────┴───────────╯
                                            &trans      &trans      &trans      &trans
//                                     ╰───────────┴───────────╯ ╰───────────┴───────────╯
            >;
        };
    };
};
